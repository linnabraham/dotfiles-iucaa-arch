# vim: filetype=neomuttrc
set autoedit = no
set xterm_set_titles=yes

# Unread mail stay unread until read
set mark_old = no		
set forward_attachments = yes

# display non-ASCII characters in headers
set rfc2047_parameters=yes

# disable the audible bell when new mail arrives
set beep_new = no

# new feature (neomutt-20241212) - compose preview
set compose_show_preview = yes

# General bindings
bind  pager <backspace> previous-line
bind  pager <enter>     next-line
bind  pager \e[1~       top
bind  pager \e[4~       bottom

bind  index <backspace> previous-entry
bind  index -           previous-entry
bind  index \eOm        previous-entry
bind  index +           next-entry
bind  index \eOk        next-entry
bind  index \eOM        display-message
bind  index \e[H        first-entry
bind  index \e[F        last-entry
bind  index \e[1~       first-entry
bind  index \e[4~       last-entry

bind  alias   <space>   select-entry
bind  alias   x         exit
bind  attach  x         exit
bind  browser x         exit

# never forget to attach an attachment
set abort_noattach = ask-yes
set abort_noattach_regex = "\\<attach(|ed|ments?)\\>"

# keep the IMAP connection alive by polling intermittently (time in seconds).
set imap_keepalive = 300

# how often to check for new mail (time in seconds).
set mail_check = 120

set header_cache = "$HOME/.muttcache"
set message_cache_dir = "$HOME/.muttcache"
set message_cache_clean = yes

# IUCAA
set real_name = 'Linn Abraham'
set from = "`pass show iucaa/zimbra/linn | grep '^user:' | cut -d' ' -f2-`"
# IMAP
set folder = 'imaps://daakghar.iucaa.in/'
set imap_user = "`pass show iucaa/zimbra/linn | grep '^user:' | cut -d' ' -f2- | cut -d'@' -f1`"
set imap_pass="`pass show iucaa/zimbra/linn | head -n 1`"
set spoolfile = +"INBOX"
set record = +"Sent"
set postponed = +"Drafts"
set trash = +"Trash"

mailboxes +INBOX +Sent +Drafts +Trash

# iucaa smtp
set smtp_url = smtp://daakghar.iucaa.in/
set smtp_user = $imap_user
set smtp_pass = $imap_pass

# DISPLAY
source "$HOME/.config/neomutt/display" 
set sidebar_format = "%B%<F? [%F]>%* %<N?%N/>%S"
bind index,pager B sidebar-toggle-visible

# Previous Mailbox
bind index,pager J sidebar-next
# Next Mailbox
bind index,pager K sidebar-prev
# Ctrl-O â€“ Open Highlighted Mailbox
bind index,pager \CO sidebar-open

bind pager j next-line
bind pager k previous-line

bind index j next-entry
bind index k previous-entry

set mailcap_path = $HOME/.config/neomutt/mailcap
# automatically show html (mailcap uses lynx)
auto_view text/html
